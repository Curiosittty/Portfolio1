<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flicker Portfolio - Plus/Minus Triggers</title>

    <style>
        /* =========================================
           1. FONT REGISTRATION
           ========================================= */
        
        /* --- ARRAY BOLD WIDE (Logo & Triggers) --- */
        @font-face {
            font-family: 'Array Bold Wide';
            src: url('fonts/Array-BoldWide.woff2') format('woff2'),
                 url('fonts/Array-BoldWide.ttf') format('truetype');
            font-weight: normal; font-style: normal;
        }

        /* --- KHAND FAMILY --- */
        @font-face {
            font-family: 'Khand Light';
            src: url('fonts/Khand-Light.woff2') format('woff2'),
                 url('fonts/Khand-Light.ttf') format('truetype');
            font-weight: normal; font-style: normal;
        }
        @font-face {
            font-family: 'Khand Regular';
            src: url('fonts/Khand-Regular.woff2') format('woff2'),
                 url('fonts/Khand-Regular.ttf') format('truetype');
            font-weight: normal; font-style: normal;
        }
        @font-face {
            font-family: 'Khand Bold';
            src: url('fonts/Khand-Bold.woff2') format('woff2'),
                 url('fonts/Khand-Bold.ttf') format('truetype');
            font-weight: normal; font-style: normal;
        }

        /* =========================================
           2. VISUAL CONTROL PANEL
           ========================================= */
        :root {
            /* --- [TYPOGRAPHY ASSIGNMENTS] --- */
            
            /* Logo -> Array Bold Wide */
            --font-logo: 'Array Bold Wide', sans-serif;

            /* Triggers (+/-) -> Array Bold Wide */
            --font-triggers: 'Array Bold Wide', sans-serif;

            /* Menu Links (Header) -> Khand Light */
            --font-menu-links: 'Khand Light', sans-serif;

            /* Footer Text -> Khand Light */
            --font-footer: 'Khand Light', sans-serif;

            /* Image Name -> Khand Regular */
            --font-image-name: 'Khand Regular', sans-serif;


            /* --- [SIZING] --- */
            --logo-size: 5rem; 
            --trigger-size: 3rem;
            --menu-item-size: 1.4rem; 
            --footer-size: 0.9rem;
            
            /* --- [LAYOUT ALIGNMENT] --- */
            --nudge-top: -3px; 
            --nudge-bottom: px;
            --satellite-gap: 20px;     
            --hero-width: 55%;         

            /* --- [CINEMA EFFECT] --- */
            --glow-blur: 900px;        
            --glow-spread: 1.3;       
            --glow-intensity: 0.15;    
            --glow-shift-amount: 30px; 

            /* --- [LIVE STATIC] --- */
            --grain-opacity: 1;     
            
            /* --- [COLORS] --- */
            --bg-solid: #0a0a0a;
            --accent-color: #ffffff;   
            --logo-color: #ffffff;
            --logo-glow: 0 0 15px rgba(255, 255, 255, 0.4);
        }

        /* =========================================
           CORE STYLES
           ========================================= */
        body {
            font-family: 'Khand Regular', sans-serif; 
            background-color: var(--bg-solid);
            color: #fff;
            margin: 0; padding: 0;
            height: 100vh;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            overflow: hidden; cursor: default;
        }

        /* --- THE CANVAS GRAIN LAYER (LAYER 50) --- */
        #static-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; 
            z-index: 50; 
            opacity: var(--grain-opacity);
            mix-blend-mode: overlay;
        }

        /* =========================================
           THE CENTRAL CONSOLE
           ========================================= */
        
        /* HEADER (LAYER 40) */
        .console-header { text-align: center; margin-bottom: 25px; z-index: 40; }
        .logo {
            font-family: var(--font-logo); 
            font-size: var(--logo-size);
            color: var(--logo-color);
            letter-spacing: 2px;
            text-transform: uppercase;
            text-shadow: var(--logo-glow);
            line-height: 1;
        }

        /* CONTAINER */
        #machine-container {
            width: var(--hero-width); max-width: 1000px;
            aspect-ratio: 16/9; position: relative; 
            z-index: auto; 
        }

        /* --- HERO SCREEN (LAYER 60) --- */
        #hero-screen {
            width: 100%; height: 100%;
            background-color: #000;
            background-size: cover; background-position: center;
            border: 1px solid rgba(255,255,255,0.1);
            position: relative;
            z-index: 60;
        }

        /* --- GLOW LAYER (LAYER 30) --- */
        #hero-glow {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #000;
            background-size: cover; background-position: center;
            z-index: 30; 
            transform: scale(var(--glow-spread));
            filter: blur(var(--glow-blur)) brightness(var(--glow-intensity));
            mix-blend-mode: screen; 
            opacity: 1; 
            transition: transform 0.1s ease-out; 
        }

        /* =========================================
           SATELLITE MENUS
           ========================================= */
        
        /* THE TRIGGERS (+/-) */
        .satellite-trigger {
            font-family: var(--font-triggers); 
            font-size: var(--trigger-size);
            color: var(--accent-color);
            line-height: 0.6;
            cursor: pointer; user-select: none;
            transition: opacity 0.2s;
        }
        .satellite-trigger:hover { color: #ccc; }
        /* Active state for opacity, text swap handled in JS */
        .satellite-trigger.active { opacity: 0.4; }

        /* THE LINKS */
        .satellite-links a {
            font-family: var(--font-menu-links); 
            font-size: var(--menu-item-size);
            color: var(--accent-color);
            text-decoration: none;
            white-space: nowrap; display: block;
            text-transform: uppercase; 
            letter-spacing: 1px;
        }
        .satellite-links a:hover { text-decoration: underline; font-weight: bold; }

        /* TOP MENU */
        .satellite-menu-top {
            position: absolute; top: var(--nudge-top); right: calc(var(--satellite-gap) * -1);
            transform: translateX(100%); display: flex; flex-direction: column; align-items: flex-start;
            text-align: left; z-index: 40; 
        }
        #menu-trigger-top { margin-bottom: 15px; }
        #menu-list-top { display: none; flex-direction: column; gap: 8px; margin-top: 5px; }
        #menu-list-top.visible { display: flex; }

        /* BOTTOM MENU */
        .satellite-menu-bottom {
            position: absolute; bottom: 0; right: calc(var(--satellite-gap) * -1);
            transform: translateX(100%); display: flex; flex-direction: column; align-items: flex-start;
            text-align: left; z-index: 40; 
        }
        #menu-trigger-bottom { margin-top: 15px; transform: translateY(var(--nudge-bottom)); }
        #menu-list-bottom {
            display: none; flex-direction: column; gap: 8px;
            position: absolute; bottom: 100%; left: 0;
        }
        #menu-list-bottom.visible { display: flex; }

        /* FOOTER */
        .console-footer {
            margin-top: 25px; 
            font-family: var(--font-footer); 
            font-size: var(--footer-size); 
            color: #666;
            text-align: center; letter-spacing: 2px; z-index: 40; text-transform: uppercase;
        }

        @media (max-width: 768px) {
            :root { --hero-width: 85%; --satellite-gap: 10px; }
            .satellite-menu-top, .satellite-menu-bottom { 
                position: relative; right: auto; top: auto; bottom: auto; transform: none; 
                flex-direction: row; gap: 20px; margin: 20px 0; justify-content: center; align-items: center;
            }
            #menu-trigger-top, #menu-trigger-bottom { margin: 0; transform: none; }
            .satellite-links.visible { position: absolute; background: #000; padding: 15px; border: 1px solid #fff; z-index: 50; }
            #menu-list-top.visible { top: 50px; }
            #menu-list-bottom.visible { bottom: auto; top: 50px; }
            #machine-container { display: flex; flex-direction: column; }
        }
    </style>
</head>
<body>

    <canvas id="static-canvas"></canvas>
    <div class="console-header"><div class="logo">Curiosittty</div></div>

    <div id="machine-container">
        <div id="hero-glow"></div>

        <div class="satellite-menu-top">
            <div id="menu-trigger-top" class="satellite-trigger">+</div>
            <div id="menu-list-top" class="satellite-links">
                <a href="#">Me</a><a href="#">My Work</a><a href="#">My Process</a><a href="#">Contact</a>
            </div>
        </div>

        <div id="hero-screen"></div>

        <div class="satellite-menu-bottom">
            <div id="menu-list-bottom" class="satellite-links">
                <a href="#" target="_blank">Twitter</a><a href="#" target="_blank">Instagram</a><a href="#" target="_blank">Discord</a>
            </div>
            <div id="menu-trigger-bottom" class="satellite-trigger">+</div>
        </div>
    </div>

    <div class="console-footer">LOADING_DATA...</div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const hero = document.getElementById('hero-screen');
            const heroGlow = document.getElementById('hero-glow'); 
            const footerDisplay = document.querySelector('.console-footer');
            
            // Get CSS variables for JS use
            const computedStyle = getComputedStyle(document.documentElement);
            const glowSpread = computedStyle.getPropertyValue('--glow-spread');
            const glowShiftAmt = parseInt(computedStyle.getPropertyValue('--glow-shift-amount'));

            // --- MENU INTERACTION ---
            const topTrigger = document.getElementById('menu-trigger-top');
            const topList = document.getElementById('menu-list-top');
            const botTrigger = document.getElementById('menu-trigger-bottom');
            const botList = document.getElementById('menu-list-bottom');

            // Function to update the symbol
            const updateTriggerSymbol = (trigger, isOpen) => {
                trigger.innerText = isOpen ? '-' : '+';
            };

            // Toggle Top
            topTrigger.addEventListener('click', (e) => {
                e.stopPropagation(); 
                const isOpening = !topList.classList.contains('visible');
                topList.classList.toggle('visible'); 
                topTrigger.classList.toggle('active');
                updateTriggerSymbol(topTrigger, isOpening);
            });

            // Toggle Bottom
            botTrigger.addEventListener('click', (e) => {
                e.stopPropagation(); 
                const isOpening = !botList.classList.contains('visible');
                botList.classList.toggle('visible'); 
                botTrigger.classList.toggle('active'); 
                updateTriggerSymbol(botTrigger, isOpening);
            });

            // Global Close Logic
            document.addEventListener('click', (e) => {
                // If clicked outside Top, close Top
                if (!e.target.closest('.satellite-menu-top')) { 
                    topList.classList.remove('visible'); 
                    topTrigger.classList.remove('active');
                    updateTriggerSymbol(topTrigger, false); // Reset to +
                }
                // If clicked outside Bottom, close Bottom
                if (!e.target.closest('.satellite-menu-bottom')) { 
                    botList.classList.remove('visible'); 
                    botTrigger.classList.remove('active'); 
                    updateTriggerSymbol(botTrigger, false); // Reset to +
                }
            });

            // --- LIVE STATIC ---
            const canvas = document.getElementById('static-canvas'); const ctx = canvas.getContext('2d');
            let width, height; const resize = () => { width = window.innerWidth; height = window.innerHeight; canvas.width = width; canvas.height = height; };
            window.addEventListener('resize', resize); resize();
            const noise = () => {
                const w = canvas.width, h = canvas.height; const iData = ctx.createImageData(w, h); const buffer32 = new Uint32Array(iData.data.buffer);
                for (let i = 0; i < buffer32.length; i++) if (Math.random() < 0.5) buffer32[i] = 0xffffffff;
                ctx.putImageData(iData, 0, 0); requestAnimationFrame(noise);
            }; requestAnimationFrame(noise);

            // --- AUDIO & PROXIMITY ---
            const AUDIO_CONFIG = { maxSpeed: 50, minSpeed: 10, basePitch: 150, clickSnap: 0.03, stereoWidth: 0.8 };
            let audioCtx; let audioEnabled = false; let currentInterval = AUDIO_CONFIG.minSpeed; let panValue = 0; let filterVal = 100; 
            const initAudio = () => {
                if (!audioCtx) { audioCtx = new window.AudioContext(); audioEnabled = true; }
                if (audioCtx.state === 'suspended') audioCtx.resume();
                document.removeEventListener('click', initAudio); document.removeEventListener('touchstart', initAudio);
            }; document.addEventListener('click', initAudio); document.addEventListener('touchstart', initAudio);
            function playSpatialClick() {
                if (!audioEnabled || !audioCtx) return;
                const t = audioCtx.currentTime; const osc = audioCtx.createOscillator(); osc.type = 'sawtooth'; 
                osc.frequency.setValueAtTime(AUDIO_CONFIG.basePitch, t); osc.frequency.exponentialRampToValueAtTime(AUDIO_CONFIG.basePitch * 0.5, t + AUDIO_CONFIG.clickSnap);
                const filter = audioCtx.createBiquadFilter(); filter.type = 'lowpass'; filter.frequency.setValueAtTime(filterVal, t); 
                const panner = audioCtx.createStereoPanner(); panner.pan.setValueAtTime(panValue, t);
                const gain = audioCtx.createGain(); gain.gain.setValueAtTime(0.5, t); gain.gain.exponentialRampToValueAtTime(0.01, t + AUDIO_CONFIG.clickSnap);
                osc.connect(filter); filter.connect(gain); gain.connect(panner); panner.connect(audioCtx.destination);
                osc.start(t); osc.stop(t + AUDIO_CONFIG.clickSnap + 0.1);
            }

            // --- MOUSE MOVE HANDLER (Glow Shift Only) ---
            document.addEventListener('mousemove', (e) => {
                const w = window.innerWidth; const h = window.innerHeight;
                const dx = e.clientX - (w / 2); const dy = e.clientY - (h / 2);
                
                // 1. GLOW "BENDING" (Parallax Shift)
                const normX = dx / (w / 2); const normY = dy / (h / 2);
                heroGlow.style.transform = `scale(${glowSpread}) translate(${-normX * glowShiftAmt}px, ${-normY * glowShiftAmt}px)`;

                // 2. AUDIO CALCS
                const maxDist = Math.hypot(w/2, h/2); const dist = Math.hypot(dx, dy);
                let proximity = 1 - (dist / (maxDist * 0.8)); if (proximity < 0) proximity = 0;
                currentInterval = AUDIO_CONFIG.maxSpeed + ((1 - proximity) * (AUDIO_CONFIG.minSpeed - AUDIO_CONFIG.maxSpeed));
                filterVal = 100 + (proximity * 2000); panValue = (dx / (w / 2)) * AUDIO_CONFIG.stereoWidth;
            });

            // --- FLICKER ENGINE ---
            const ASSETS = []; for(let i=0; i<50; i++) ASSETS.push({ name: `CAM_RAW_${String(i).padStart(4, '0')}.JPG`, url: `https://picsum.photos/seed/${i+500}/1200/675` });
            let currentIndex = 0; let isHovering = false; 
            function updateImage() {
                const currentAsset = ASSETS[currentIndex]; const url = `url('${currentAsset.url}')`;
                hero.style.backgroundImage = url; heroGlow.style.backgroundImage = url;
                
                // --- UPDATE FOOTER TEXT (IMAGE NAME) ---
                footerDisplay.innerText = currentAsset.name;
                
                // FORCE KHAND REGULAR ON THE IMAGE NAME
                footerDisplay.style.fontFamily = "var(--font-image-name)"; 
                
                playSpatialClick(); 
            }
            function stepForward() { currentIndex = (currentIndex + 1) % ASSETS.length; updateImage(); }
            function stepBackward() { currentIndex = (currentIndex - 1 + ASSETS.length) % ASSETS.length; updateImage(); }
            function startFlickerLoop() { if (!isHovering) stepForward(); setTimeout(startFlickerLoop, currentInterval); }
            startFlickerLoop();

            hero.addEventListener('mouseenter', () => { isHovering = true; }); hero.addEventListener('mouseleave', () => { isHovering = false; });
            hero.addEventListener('wheel', (e) => { e.preventDefault(); if (e.deltaY > 50) stepForward(); else if (e.deltaY < -50) stepBackward(); }, { passive: false });
            let touchStartX = 0; hero.addEventListener('touchstart', (e) => { isHovering = true; touchStartX = e.touches[0].clientX; }, { passive: true });
            hero.addEventListener('touchmove', (e) => { const diff = touchStartX - e.touches[0].clientX; if (Math.abs(diff) > 20) { diff > 0 ? stepForward() : stepBackward(); touchStartX = e.touches[0].clientX; } }, { passive: true });
            hero.addEventListener('touchend', () => { isHovering = false; });
        });
    </script>
</body>
</html>